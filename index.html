<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Add React, Babel and Tailwind CDN -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <!-- Tailwind CDN (runtime) - provides Tailwind utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Prism.js for client-side syntax highlighting -->
    <link rel="stylesheet" href="https://unpkg.com/prismjs@1.29.0/themes/prism-tomorrow.css" />
    <link rel="stylesheet" href="https://unpkg.com/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.css" />
    <script src="https://unpkg.com/prismjs@1.29.0/prism.js"></script>
    <script src="https://unpkg.com/prismjs@1.29.0/components/prism-csharp.min.js"></script>
    <script src="https://unpkg.com/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <style>
        /* Base */
        :root {
            --bg: #f3f4f6;
            --card: #ffffff;
            --muted: #6b7280;
            --mono: 'Consolas', 'Monaco', monospace;
        }

        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            background: var(--bg);
            padding: 2rem 1rem 6rem;
            /* leave room at bottom for fixed controls */
            color: #111827;
        }

        /* Slide container */
        .slide-container {
            background: var(--card);
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            width: min(1100px, 100%);
            max-width: 1100px;
            margin: 0 auto;
            text-align: left;
            /* Make the slide content fit the viewport and scroll internally so page
           controls remain visible. */
            max-height: calc(100vh - 9rem);
            height: calc(100vh - 9rem);
            overflow: hidden;
            /* inner element will scroll when needed */
            /* Center the inner slide box when it is shorter than the container,
           and allow the inner box to scroll when content is taller. */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Inner wrapper that actually holds the slide content. This element
         scrolls when content is taller than the container. */
        .slide-inner {
            width: 100%;
            max-height: 100%;
            overflow: auto;
            box-sizing: border-box;
            /* start hidden for fade-in transition */
            opacity: 0;
            transform: translateY(6px);
            /* slightly slower fade for a smoother appearance */
            transition: opacity .45s ease, transform .45s ease;
            /* default: hide native scrollbar visuals (will appear on hover) */
            scrollbar-width: thin; /* Firefox */
            scrollbar-color: transparent transparent;
        }

            /* When visible, animate into place */
            .slide-inner.visible {
                opacity: 1;
                transform: translateY(0);
            }

            /* WebKit scrollbar styling: thin and only visible on hover */
            .slide-inner::-webkit-scrollbar {
                width: 8px;
                height: 8px;
            }

            .slide-inner::-webkit-scrollbar-track {
                background: transparent;
            }

            .slide-inner::-webkit-scrollbar-thumb {
                background: transparent; /* hidden by default */
                border-radius: 999px;
                transition: background .18s ease;
            }

            /* On hover, show a subtle thumb */
            .slide-inner:hover::-webkit-scrollbar-thumb {
                background: rgba(0,0,0,0.18);
            }

            /* For Firefox: show thumb color on hover */
            .slide-inner:hover {
                scrollbar-color: rgba(0,0,0,0.18) transparent;
            }

        /* Controls (prev/next) */
        .controls {
            margin-top: 1rem;
            text-align: center;
        }

        /* Keep controls visible at the bottom of the viewport so you don't
         need to scroll to change slides. */
        .controls {
            position: fixed;
            left: 50%;
            bottom: 1rem;
            transform: translateX(-50%);
            z-index: 1200;
            display: flex;
            gap: .5rem;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            padding: .4rem .6rem;
            border-radius: .75rem;
            box-shadow: 0 6px 20px rgba(15, 23, 42, 0.12);
        }

        /* Buttons */
        .btn {
            padding: .5rem 1rem;
            border: none;
            border-radius: .5rem;
            background: #e5e7eb;
            cursor: pointer;
            font-size: 1rem;
        }

            .btn:hover {
                background: #d1d5db
            }
    </style>
</head>

<body>
    <div id="slide" class="slide-container"></div>
    <div class="controls">
        <button id="prev" class="btn">‚óÄ</button>
        <span id="counter"></span>
        <button id="next" class="btn">‚ñ∂</button>
    </div>
    <script type="text/babel">
                const { createElement } = React;

                // Define icon components
                const CheckCircle = ({ size, className }) => {
                    return <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                };

                const Gauge = ({ size, className }) => {
                    return <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M16.2 7.8l-2.8 2.8"></path>
                        <path d="M2 12h2"></path>
                        <path d="M20 12h2"></path>
                    </svg>
                };

                const Zap = ({ size, className }) => {
                    return <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                    </svg>
                };

                const Code = ({ size, className }) => {
                    return <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <polyline points="16 18 22 12 16 6"></polyline>
                        <polyline points="8 6 2 12 8 18"></polyline>
                    </svg>
                };

                const TrendingUp = ({ size, className }) => {
                    return <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                        <polyline points="17 6 23 6 23 12"></polyline>
                    </svg>
                };

                const slides = [
                    // Title Slide
                    {
                        title: "Blazor Advanced Component Design & Performance Optimization",
                        type: "title",
                        content: (
                            <div className="flex flex-col items-center justify-center h-full">
                                <div className="text-6xl mb-6">‚ö°</div>
                                <h1 className="text-5xl font-bold text-blue-600 mb-4">Blazor</h1>
                                <h2 className="text-3xl font-semibold text-gray-700 mb-8">Advanced Component Design & Performance Optimization</h2>
                                <p className="text-xl text-gray-600">Building High-Performance Blazor Applications</p>
                            </div>
                        )
                    },

                    // Agenda
                    {
                        title: "Agenda",
                        type: "content",
                        content: (
                            <div className="space-y-4">
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">What We'll Cover Today</h2>
                                <div className="grid grid-cols-2 gap-4">
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <Code className="text-blue-600 mb-2" size={32} />
                                        <h3 className="font-semibold text-lg mb-2">Advanced Component Design</h3>
                                        <p className="text-sm text-gray-600">Lifecycle, Cascading Parameters, Communication</p>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <Zap className="text-green-600 mb-2" size={32} />
                                        <h3 className="font-semibold text-lg mb-2">Performance Optimization</h3>
                                        <p className="text-sm text-gray-600">Rendering, Lifecycle, Memory Management</p>
                                    </div>
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <CheckCircle className="text-purple-600 mb-2" size={32} />
                                        <h3 className="font-semibold text-lg mb-2">Best Practices</h3>
                                        <p className="text-sm text-gray-600">Design Principles & Code Organization</p>
                                    </div>
                                    <div className="bg-orange-50 p-4 rounded-lg">
                                        <Gauge className="text-orange-600 mb-2" size={32} />
                                        <h3 className="font-semibold text-lg mb-2">Monitoring & Debugging</h3>
                                        <p className="text-sm text-gray-600">Tools, Profiling, Real-World Cases</p>
                                    </div>
                                    <div className="bg-orange-50 p-4 rounded-lg">
    <Gauge className="text-orange-600 mb-2" size={32} />
    <h3 className="font-semibold text-lg mb-2">Q&A</h3>
    <p className="text-sm text-gray-600">Questions and Answers</p>
</div>
                                </div>
                            </div>
                        )
                    },


                    // Section 1: Component Lifecycle
                    {
                        title: "Component Lifecycle Methods",
                        type: "content",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Component Lifecycle & Optimal Usage</h2>
                                <div className="space-y-4">
                                    <div className="bg-gray-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-blue-600 mb-2">Initialization Phase</h3>
                                        <ul className="space-y-2 text-sm">
                                            <li><span className="font-mono bg-blue-100 px-2 py-1 rounded">SetParametersAsync</span> - First method called, parameters are set</li>
                                            <li><span className="font-mono bg-blue-100 px-2 py-1 rounded">OnInitialized / OnInitializedAsync</span> - Component initialization logic</li>
                                            <li className="text-green-700">‚úì Use for: Loading data, initializing services, setting up subscriptions</li>
                                        </ul>
                                    </div>
                                    <div className="bg-gray-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-blue-600 mb-2">Rendering Phase</h3>
                                        <ul className="space-y-2 text-sm">
                                            <li><span className="font-mono bg-blue-100 px-2 py-1 rounded">OnParametersSet / OnParametersSetAsync</span> - After parameters are set</li>
                                            <li><span className="font-mono bg-blue-100 px-2 py-1 rounded">BuildRenderTree</span> - Renders component markup</li>
                                            <li><span className="font-mono bg-blue-100 px-2 py-1 rounded">OnAfterRender / OnAfterRenderAsync</span> - After component renders</li>
                                            <li className="text-green-700">‚úì Use OnAfterRender for: JSInterop, DOM manipulation, measuring elements</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                                        <p className="font-semibold text-yellow-800">‚ö†Ô∏è Pro Tip:</p>
                                        <p className="text-sm text-yellow-700">Use the <span className="font-mono">firstRender</span> parameter in OnAfterRender to avoid repeated operations</p>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Lifecycle Code Example
                    {
                        title: "Lifecycle - Code Example",
                        type: "code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Optimal Lifecycle Usage</h2>
                                <div className="bg-gray-900 text-gray-100 p-4 rounded-lg font-mono text-sm overflow-auto">
                                    <pre>{`
        @code {
            [Parameter] public int UserId { get; set; }
            private User user;
            private IJSObjectReference module;

            // Initialize once - load data, setup services
            protected override async Task OnInitializedAsync()
            {
                user = await UserService.GetUserAsync(UserId);
            }

            // Handle parameter changes
            protected override async Task OnParametersSetAsync()
            {
                // Reload if UserId changed
                user = await UserService.GetUserAsync(UserId);
            }

            // DOM operations after render
            protected override async Task OnAfterRenderAsync(bool firstRender)
            {
                if (firstRender)
                {
                    module = await JS.InvokeAsync<IJSObjectReference>(
                        "import", "./components/usercard.js");
                    await module.InvokeVoidAsync("initialize");
                }
            }

            public async ValueTask DisposeAsync()
            {
                if (module != null)
                    await module.DisposeAsync();
            }
        }
                              `}</pre>
                                </div>
                            </div>
                        )
                    },

                    // Cascading Parameters
                    {
                        title: "Cascading Parameters",
                        type: "content",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Cascading Parameters for Deep Trees</h2>
                                <div className="space-y-4">
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">What are Cascading Parameters?</h3>
                                        <p className="text-sm text-gray-700">Pass data down component hierarchy without explicitly passing through each level (avoiding "prop drilling")</p>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                            <h4 className="font-semibold text-red-800 mb-2">‚ùå Without Cascading</h4>
                                            <p className="text-xs font-mono text-gray-700">Parent ‚Üí Child ‚Üí GrandChild ‚Üí GreatGrandChild</p>
                                            <p className="text-xs text-gray-600 mt-2">Must pass through every level even if intermediate components don't need it</p>
                                        </div>
                                        <div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                            <h4 className="font-semibold text-green-800 mb-2">‚úì With Cascading</h4>
                                            <p className="text-xs font-mono text-gray-700">Parent ‚Üí GreatGrandChild (direct)</p>
                                            <p className="text-xs text-gray-600 mt-2">Access cascaded value at any level without passing through intermediate components</p>
                                        </div>
                                    </div>
                                    <div className="bg-gray-50 p-4 rounded-lg">
                                        <h3 className="font-semibold mb-2">Common Use Cases:</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Theme settings (light/dark mode)</li>
                                            <li>User authentication state</li>
                                            <li>Application configuration</li>
                                            <li>Localization/culture settings</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Cascading Parameters Code
                    {
                        title: "Cascading Parameters - Code",
                        type: "code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Cascading Parameters Implementation</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-2">// Parent Component - Provide value</div>
                                        <pre>{`
        <CascadingValue Value="@currentTheme">
            <ChildComponent />
        </CascadingValue>

        @code {
            private ThemeInfo currentTheme = new() { IsDark = true };
        }
                                  `}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-2">// Child/Descendant - Receive value</div>
                                        <pre>{`
        @code {
            [CascadingParameter]
            public ThemeInfo Theme { get; set; }

            private string BackgroundColor =>
                Theme?.IsDark ? "bg-gray-900" : "bg-white";
        }
                                      `}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-2">// Named Cascading Parameters (for multiple values)</div>
                                        <pre>{`
        <CascadingValue Value="@theme" Name="Theme">
            <CascadingValue Value="@user" Name="User">
            <ChildComponent />
            </CascadingValue>
        </CascadingValue>

        [CascadingParameter(Name = "Theme")]
        public ThemeInfo Theme { get; set; }

        [CascadingParameter(Name = "User")]
        public UserInfo User { get; set; }`
                                        }</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Component Communication
                    {
                        title: "Component Communication",
                        type: "content",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Component Communication Patterns</h2>
                                <div className="space-y-4">
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-3">EventCallback vs Delegates</h3>
                                        <div className="grid grid-cols-2 gap-3 text-sm">
                                            <div className="bg-white p-3 rounded border-l-4 border-green-500">
                                                <h4 className="font-semibold text-green-700 mb-2">‚úì EventCallback (Recommended)</h4>
                                                <ul className="space-y-1 text-xs">
                                                    <li>Automatically triggers StateHasChanged</li>
                                                    <li>Supports async methods</li>
                                                    <li>Type-safe with EventCallback&lt;T&gt;</li>
                                                    <li>Better performance (cached)</li>
                                                </ul>
                                            </div>
                                            <div className="bg-white p-3 rounded border-l-4 border-yellow-500">
                                                <h4 className="font-semibold text-yellow-700 mb-2">‚ö†Ô∏è Delegates</h4>
                                                <ul className="space-y-1 text-xs">
                                                    <li>Manual StateHasChanged needed</li>
                                                    <li>Can use Action/Func</li>
                                                    <li>More verbose for async</li>
                                                    <li>Use for advanced scenarios</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Two-Way Binding with @bind</h3>
                                        <p className="text-sm text-gray-700 mb-2">Syntax: <span className="font-mono bg-white px-2 py-1 rounded">@bind-PropertyName</span></p>
                                        <p className="text-xs text-gray-600">Creates a parameter and an EventCallback automatically for two-way data flow</p>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Inter-Component Messaging</h3>
                                        <ul className="text-sm space-y-1">
                                            <li><span className="font-semibold">State Container Pattern:</span> Shared service with events</li>
                                            <li><span className="font-semibold">Event Aggregator:</span> Pub/sub for loosely coupled components</li>
                                            <li><span className="font-semibold">NavigationManager:</span> Component coordination via routing</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Communication Code Examples
                    {
                        title: "Component Communication - Code",
                        type: "code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Communication Code Examples</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// EventCallback Example</div>
                                        <pre>{`
        // Child Component
        [Parameter] public EventCallback<string> OnValueChanged { get; set; }

        private async Task HandleClick()
        {
            await OnValueChanged.InvokeAsync("New Value");
        }

        // Parent Component
        <ChildComponent OnValueChanged="HandleValueChanged" />

        private void HandleValueChanged(string value)
        {
            // Automatically triggers re-render
            selectedValue = value;
        }
                                `}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// Two-Way Binding</div>
                                        <pre>{`
        // Child Component
        [Parameter] public string Value { get; set; }
        [Parameter] public EventCallback<string> ValueChanged { get; set; }

        // Parent Component - Simple syntax
        <ChildComponent @bind-Value="searchText" />

        // Equivalent to:
        <ChildComponent Value="@searchText"
                        ValueChanged="v => searchText = v" />`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// State Container Pattern</div>
                                        <pre>{`public class AppState
                                    {
                                        private string _currentUser;
                                        public event Action OnChange;

                                        public string CurrentUser
                                        {
                                            get => _currentUser;
                                            set { _currentUser = value; NotifyStateChanged(); }
                                        }

                                        private void NotifyStateChanged() => OnChange?.Invoke();
                                    }`}</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Performance Section Intro
                    {
                        title: "Performance Optimization",
                        type: "section",
                        content: (
                            <div className="flex flex-col items-center justify-center h-full">
                                <Zap size={80} className="text-yellow-500 mb-6" />
                                <h1 className="text-5xl font-bold text-blue-600 mb-4">Performance Optimization</h1>
                                <p className="text-xl text-gray-600">Making Blazor Apps Lightning Fast</p>
                            </div>
                        )
                    },

                    // Rendering Process
                    {
                        title: "Understanding Rendering",
                        type: "content",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Blazor Rendering Process & Diffing</h2>
                                <div className="space-y-4">
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">How Blazor Renders</h3>
                                        <ol className="text-sm space-y-2 list-decimal list-inside">
                                            <li>Component triggers render (StateHasChanged called)</li>
                                            <li>BuildRenderTree creates new virtual DOM</li>
                                            <li>Diffing algorithm compares old vs new render tree</li>
                                            <li>Only changed elements are updated in actual DOM</li>
                                        </ol>
                                    </div>
                                    <div className="grid grid-cols-3 gap-3 text-xs">
                                        <div className="bg-green-50 p-3 rounded text-center">
                                            <div className="font-bold text-green-700 mb-1">Efficient</div>
                                            <div className="text-gray-700">Only changed parts re-render</div>
                                        </div>
                                        <div className="bg-yellow-50 p-3 rounded text-center">
                                            <div className="font-bold text-yellow-700 mb-1">Sequence Matters</div>
                                            <div className="text-gray-700">List order changes = re-render</div>
                                        </div>
                                        <div className="bg-red-50 p-3 rounded text-center">
                                            <div className="font-bold text-red-700 mb-1">Expensive</div>
                                            <div className="text-gray-700">Unnecessary renders hurt performance</div>
                                        </div>
                                    </div>
                                    <div className="bg-gray-50 p-4 rounded-lg">
                                        <h3 className="font-semibold mb-2">What Triggers Rendering?</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Parent component re-renders ‚Üí child components re-render</li>
                                            <li>StateHasChanged() explicitly called</li>
                                            <li>EventCallback invoked</li>
                                            <li>Parameter values change</li>
                                            <li>Timer or background task completes</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // ShouldRender
                    {
                        title: "ShouldRender Method",
                        type: "content",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">ShouldRender() - Control When to Render</h2>
                                <div className="space-y-4">
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Purpose</h3>
                                        <p className="text-sm text-gray-700">Override this method to prevent unnecessary re-renders and improve performance</p>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-green-50 p-4 rounded-lg">
                                            <h4 className="font-semibold text-green-700 mb-2">When to Use</h4>
                                            <ul className="text-sm space-y-1">
                                                <li>Component with expensive render logic</li>
                                                <li>Frequent parent re-renders but child data unchanged</li>
                                                <li>Real-time data updates (limit refresh rate)</li>
                                                <li>Large lists with static content</li>
                                            </ul>
                                        </div>
                                        <div className="bg-yellow-50 p-4 rounded-lg">
                                            <h4 className="font-semibold text-yellow-700 mb-2">When NOT to Use</h4>
                                            <ul className="text-sm space-y-1">
                                                <li>Simple components (overhead not worth it)</li>
                                                <li>When all renders are necessary</li>
                                                <li>Complex state dependencies (hard to track)</li>
                                                <li>Default behavior is sufficient</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold mb-2">Key Points</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Returns <span className="font-mono bg-white px-1 rounded">true</span> by default (always render)</li>
                                            <li>Return <span className="font-mono bg-white px-1 rounded">false</span> to skip rendering</li>
                                            <li>Called before every render operation</li>
                                            <li>Can compare current vs previous parameter values</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // ShouldRender Code
                    {
                        title: "ShouldRender - Code Example",
                        type: "code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">ShouldRender Implementation</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// Basic Example - Only render on specific changes</div>
                                        <pre>{`
        @code {
            [Parameter] public int UserId { get; set; }
            [Parameter] public string DisplayName { get; set; }

            private int previousUserId;

            protected override bool ShouldRender()
            {
                // Only re-render if UserId actually changed
                if (previousUserId != UserId)
                {
                    previousUserId = UserId;
                    return true;
                }
                return false;
            }
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// Advanced - Rate limiting renders</div>
                                        <pre>{`
        @code {
            private DateTime lastRenderTime = DateTime.MinValue;
            private const int MinRenderIntervalMs = 100;

            protected override bool ShouldRender()
            {
                var now = DateTime.UtcNow;
                var elapsed = (now - lastRenderTime).TotalMilliseconds;

                if (elapsed < MinRenderIntervalMs)
                {
                    return false; // Too soon, skip render
                }

                lastRenderTime = now;
                return true;
            }
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-yellow-50 p-3 rounded-lg text-sm">
                                        <span className="font-semibold">‚ö†Ô∏è Warning:</span> If you return false but need to render later, you must manually call <span className="font-mono bg-white px-1 rounded">StateHasChanged()</span>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // @key Directive
                    {
                        title: "@key Directive",
                        type: "content",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">@key Directive for Efficient Lists</h2>
                                <div className="space-y-4">
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">The Problem</h3>
                                        <p className="text-sm text-gray-700">When list items are added/removed/reordered, Blazor may incorrectly reuse components, leading to wrong data display or unnecessary re-renders</p>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">The Solution: @key</h3>
                                        <p className="text-sm text-gray-700 mb-2">Tells Blazor how to identify each element uniquely, ensuring correct component reuse</p>
                                        <div className="bg-white p-3 rounded font-mono text-xs">
                                            @key="uniqueIdentifier"
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4 text-sm">
                                        <div className="bg-red-50 p-3 rounded">
                                            <h4 className="font-semibold text-red-700 mb-2">‚ùå Without @key</h4>
                                            <ul className="text-xs space-y-1">
                                                <li>Components reused by position</li>
                                                <li>Reordering = full re-render</li>
                                                <li>State loss possible</li>
                                                <li>Performance issues with large lists</li>
                                            </ul>
                                        </div>
                                        <div className="bg-green-50 p-3 rounded">
                                            <h4 className="font-semibold text-green-700 mb-2">‚úì With @key</h4>
                                            <ul className="text-xs space-y-1">
                                                <li>Components tracked by unique ID</li>
                                                <li>Only changed items re-render</li>
                                                <li>State preserved correctly</li>
                                                <li>Better performance</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div className="bg-purple-50 p-3 rounded-lg">
                                        <h4 className="font-semibold mb-2">When to Use @key</h4>
                                        <ul className="text-sm space-y-1">
                                            <li>Dynamic lists that can be reordered</li>
                                            <li>Lists with add/remove operations</li>
                                            <li>Components with internal state</li>
                                            <li>Virtualized or paginated lists</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // @key Code Example
                    {
                        title: "@key - Code Example",
                        type: "code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">@key Directive Usage</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BAD: Without @key (can cause issues)</div>
                                        <pre>{`
        @foreach (var item in items)
        {
            <ItemComponent Item="@item" />
        }

        // Problem: If items reorder, components reused
        // by position, causing wrong data display`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: With @key (recommended)</div>
                                        <pre>{`@foreach (var item in items)
        {
            <ItemComponent @key="item.Id" Item="@item" />
        }

        // Each component is uniquely tracked by item.Id
        // Reordering preserves component identity`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// Complex Example: Nested lists</div>
                                        <pre>{`@foreach (var category in categories)
        {
            <div @key="category.Id">
                <h3>@category.Name</h3>
                @foreach (var product in category.Products)
                {
                    <ProductCard @key="product.Id"
                                Product="@product" />
                }
            </div>
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-blue-50 p-3 rounded-lg text-sm">
                                        <span className="font-semibold">üí° Best Practice:</span> Use unique, stable identifiers (IDs, GUIDs) as keys. Avoid using indices or random values.
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Async Operations
                    {
                        title: "Async Lifecycle Optimization",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">OnInitializedAsync vs OnAfterRenderAsync</h2>
                                <div className="space-y-4">
                                    <div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                        <h3 className="font-semibold text-lg text-green-700 mb-2">OnInitializedAsync</h3>
                                        <div className="text-sm space-y-2">
                                            <p className="font-semibold">When: Before first render</p>
                                            <p className="font-semibold">Use for:</p>
                                            <ul className="space-y-1 ml-4">
                                                <li>Loading data to display</li>
                                                <li>Initializing services</li>
                                                <li>Setting up state</li>
                                                <li>API calls for initial data</li>
                                            </ul>
                                            <p className="text-green-700 font-semibold mt-2">‚úì Component waits for completion before rendering</p>
                                        </div>
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                                        <h3 className="font-semibold text-lg text-blue-700 mb-2">OnAfterRenderAsync</h3>
                                        <div className="text-sm space-y-2">
                                            <p className="font-semibold">When: After component renders to DOM</p>
                                            <p className="font-semibold">Use for:</p>
                                            <ul className="space-y-1 ml-4">
                                                <li>JSInterop operations</li>
                                                <li>DOM manipulation</li>
                                                <li>Measuring element sizes</li>
                                                <li>Focus management</li>
                                                <li>Third-party library initialization</li>
                                            </ul>
                                            <p className="text-blue-700 font-semibold mt-2">‚úì Doesn't block initial render</p>
                                        </div>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold mb-2">‚ö†Ô∏è Key Differences</h3>
                                        <div className="grid grid-cols-2 gap-3 text-xs">
                                            <div>
                                                <p className="font-semibold text-green-700">OnInitializedAsync</p>
                                                <p>Blocks rendering until complete</p>
                                                <p>Called once (or twice with prerendering)</p>
                                                <p>No DOM access available</p>
                                            </div>
                                            <div>
                                                <p className="font-semibold text-blue-700">OnAfterRenderAsync</p>
                                                <p>Doesn't block rendering</p>
                                                <p>Called after every render</p>
                                                <p>DOM is available</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Async Code Example
                    {
                        title: "Async Operations - Code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Async Lifecycle Best Practices</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Load data in OnInitializedAsync</div>
                                        <pre>{`
        protected override async Task OnInitializedAsync()
        {
            // Show loading state while fetching
            isLoading = true;

            try
            {
                products = await ProductService.GetProductsAsync();
                user = await AuthService.GetCurrentUserAsync();
            }
            finally
            {
                isLoading = false;
            }

            // Component renders after this completes
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: JSInterop in OnAfterRenderAsync</div>
                                        <pre>{`
        protected override async Task OnAfterRenderAsync(bool firstRender)
        {
            if (firstRender)
            {
                // Initialize JavaScript library
                await JS.InvokeVoidAsync("initChart", chartElement);

                // Set focus on input
                await inputElement.FocusAsync();
            }

            // firstRender check prevents repeated execution
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BAD: JSInterop in OnInitializedAsync</div>
                                        <pre>{`
        protected override async Task OnInitializedAsync()
        {
            // DOM doesn't exist yet - this will fail!
            await JS.InvokeVoidAsync("initChart", chartElement);
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-blue-50 p-3 rounded-lg text-sm">
                                        <span className="font-semibold">üí° Pro Tip:</span> Use OnParametersSetAsync for data that depends on parameter changes
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Lazy Loading
                    {
                        title: "Lazy Loading",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Lazy Loading Components & Assemblies</h2>
                                <div className="space-y-4">
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Why Lazy Loading?</h3>
                                        <p className="text-sm text-gray-700">Reduce initial bundle size and load time by loading components/assemblies only when needed</p>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-green-50 p-4 rounded-lg">
                                            <h4 className="font-semibold text-green-700 mb-2">Benefits</h4>
                                            <ul className="text-sm space-y-1">
                                                <li>Faster initial page load</li>
                                                <li>Smaller bundle size</li>
                                                <li>Better perceived performance</li>
                                                <li>Bandwidth savings</li>
                                                <li>On-demand feature loading</li>
                                            </ul>
                                        </div>
                                        <div className="bg-blue-50 p-4 rounded-lg">
                                            <h4 className="font-semibold text-blue-700 mb-2">Use Cases</h4>
                                            <ul className="text-sm space-y-1">
                                                <li>Admin panels</li>
                                                <li>Infrequently used features</li>
                                                <li>Large chart libraries</li>
                                                <li>Report generators</li>
                                                <li>Advanced editors</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div className="bg-gray-50 p-4 rounded-lg">
                                        <h3 className="font-semibold mb-2">Two Approaches</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className="flex items-start">
                                                <span className="font-mono bg-blue-100 px-2 py-1 rounded mr-2 text-xs">1</span>
                                                <div>
                                                    <span className="font-semibold">Router-based:</span> Lazy load entire assemblies via routing
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <span className="font-mono bg-blue-100 px-2 py-1 rounded mr-2 text-xs">2</span>
                                                <div>
                                                    <span className="font-semibold">Component-based:</span> Dynamically load components on-demand
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Lazy Loading Code
                    {
                        title: "Lazy Loading - Code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Lazy Loading Implementation</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// 1. Configure in App.razor</div>
                                        <pre>{`
        <Router AppAssembly="@typeof(App).Assembly"
                AdditionalAssemblies="@lazyLoadedAssemblies"
                OnNavigateAsync="OnNavigateAsync">
        </Router>

        @code {
            private List<Assembly> lazyLoadedAssemblies = new();

            private async Task OnNavigateAsync(NavigationContext args)
            {
                if (args.Path.Contains("admin"))
                {
                    var assemblies = await AssemblyLoader
                        .LoadAssembliesAsync(new[] { "AdminPanel.dll" });
                    lazyLoadedAssemblies.AddRange(assemblies);
                }
            }
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// 2. Project file (.csproj)</div>
                                        <pre>{`
        <ItemGroup>
            <BlazorWebAssemblyLazyLoad Include="AdminPanel.dll" />
            <BlazorWebAssemblyLazyLoad Include="ReportGenerator.dll" />
        </ItemGroup>`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// 3. Dynamic component loading</div>
                                        <pre>{`
        @if (showAdvancedEditor)
        {
            <DynamicComponent Type="@editorType" />
        }

        @code {
            private Type editorType;

            private async Task LoadEditor()
            {
                var assembly = await AssemblyLoader
                    .LoadAssembliesAsync(new[] { "AdvancedEditor.dll" });

                editorType = assembly.First()
                    .GetType("AdvancedEditor.Editor");

                showAdvancedEditor = true;
            }
        }`
                                        }</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Memory Management
                    {
                        title: "Memory Management",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Common Memory Leaks in Blazor</h2>
                                <div className="space-y-4">
                                    <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                        <h3 className="font-semibold text-lg text-red-700 mb-2">Top Memory Leak Sources</h3>
                                        <div className="space-y-3 text-sm">
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold text-red-700">1. Event Handlers Not Unsubscribed</p>
                                                <p className="text-xs text-gray-600">Services or static events that outlive components</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold text-red-700">2. JSInterop References</p>
                                                <p className="text-xs text-gray-600">IJSObjectReference not disposed properly</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold text-red-700">3. Timers Running After Disposal</p>
                                                <p className="text-xs text-gray-600">System.Timers.Timer or PeriodicTimer not stopped</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold text-red-700">4. HttpClient Subscriptions</p>
                                                <p className="text-xs text-gray-600">Long-running HTTP requests not cancelled</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-green-700 mb-2">Prevention Strategy</h3>
                                        <ul className="text-sm space-y-2">
                                            <li>‚úì Always implement <span className="font-mono bg-white px-2 py-1 rounded">IDisposable</span> or <span className="font-mono bg-white px-2 py-1 rounded">IAsyncDisposable</span></li>
                                            <li>‚úì Unsubscribe from events in Dispose</li>
                                            <li>‚úì Use CancellationTokens for async operations</li>
                                            <li>‚úì Dispose JSInterop references</li>
                                            <li>‚úì Stop timers and background tasks</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Memory Management Code
                    {
                        title: "Memory Management - Code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Preventing Memory Leaks</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Proper event cleanup</div>
                                        <pre>{`
        @implements IDisposable

        @code {
            [Inject] private NotificationService NotifyService { get; set; }

            protected override void OnInitialized()
            {
                NotifyService.OnNotification += HandleNotification;
            }

            public void Dispose()
            {
                // Always unsubscribe!
                NotifyService.OnNotification -= HandleNotification;
            }

            private void HandleNotification(string message) { }
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Timer management</div>
                                        <pre>{`
        @implements IDisposable

        @code {
            private System.Threading.Timer timer;

            protected override void OnInitialized()
            {
                timer = new Timer(async _ =>
                {
                    await InvokeAsync(StateHasChanged);
                }, null, 1000, 1000);
            }

            public void Dispose()
            {
                timer?.Dispose();
            }
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: CancellationToken usage</div>
                                        <pre>{`
        @implements IDisposable

        @code {
            private CancellationTokenSource cts = new();

            protected override async Task OnInitializedAsync()
            {
                try
                {
                    var data = await HttpClient.GetFromJsonAsync<Data>(
                        "api/data", cts.Token);
                }
                catch (OperationCanceledException)
                {
                    // Component disposed, operation cancelled
                }
            }

            public void Dispose()
            {
                cts?.Cancel();
                cts?.Dispose();
            }
        }`
                                        }</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Timer Management
                    {
                        title: "Timer & Background Tasks",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Timer & Background Task Management</h2>
                                <div className="space-y-4">
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-3">Common Scenarios</h3>
                                        <ul className="text-sm space-y-2">
                                            <li>Auto-refresh data every X seconds</li>
                                            <li>Real-time updates (stock prices, notifications)</li>
                                            <li>Polling for status changes</li>
                                            <li>Debouncing user input</li>
                                            <li>Countdown timers</li>
                                        </ul>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-red-50 p-4 rounded-lg">
                                            <h4 className="font-semibold text-red-700 mb-2">‚ùå Common Mistakes</h4>
                                            <ul className="text-xs space-y-1">
                                                <li>Not disposing timers</li>
                                                <li>Calling StateHasChanged without InvokeAsync</li>
                                                <li>Multiple overlapping timers</li>
                                                <li>Not handling component disposal during async</li>
                                                <li>Forgetting to stop background tasks</li>
                                            </ul>
                                        </div>
                                        <div className="bg-green-50 p-4 rounded-lg">
                                            <h4 className="font-semibold text-green-700 mb-2">‚úì Best Practices</h4>
                                            <ul className="text-xs space-y-1">
                                                <li>Always dispose timers</li>
                                                <li>Use InvokeAsync for UI updates</li>
                                                <li>Check if component is disposed</li>
                                                <li>Use CancellationTokens</li>
                                                <li>Consider PeriodicTimer (.NET 6+)</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold mb-2">‚ö†Ô∏è Critical: UI Thread Safety</h3>
                                        <p className="text-sm">Timer callbacks run on background threads. Always use <span className="font-mono bg-white px-2 py-1 rounded">InvokeAsync</span> to update UI</p>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Timer Code Examples
                    {
                        title: "Timer Management - Code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Timer Implementation Patterns</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì System.Threading.Timer</div>
                                        <pre>{`
        @implements IDisposable

        @code {
            private Timer timer;

            protected override void OnInitialized()
            {
                timer = new Timer(async _ =>
                {
                    await InvokeAsync(async () =>
                    {
                        await LoadDataAsync();
                        StateHasChanged();
                    });
                }, null, TimeSpan.Zero, TimeSpan.FromSeconds(5));
            }

            public void Dispose() => timer?.Dispose();
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì PeriodicTimer (.NET 6+) - Recommended</div>
                                        <pre>{`
        @implements IAsyncDisposable

        @code {
            private PeriodicTimer timer;
            private CancellationTokenSource cts = new();

            protected override async Task OnInitializedAsync()
            {
                timer = new PeriodicTimer(TimeSpan.FromSeconds(5));
                _ = RunTimerAsync();
            }

            private async Task RunTimerAsync()
            {
                try
                {
                    while (await timer.WaitForNextTickAsync(cts.Token))
                    {
                        await LoadDataAsync();
                        StateHasChanged();
                    }
                }
                catch (OperationCanceledException) { }
            }

            public async ValueTask DisposeAsync()
            {
                cts?.Cancel();
                cts?.Dispose();
                timer?.Dispose();
            }
        }`
                                        }</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Best Practices Section
                    {
                        title: "Best Practices",
                        content: (
                            <div className="flex flex-col items-center justify-center h-full">
                                <CheckCircle size={80} className="text-green-500 mb-6" />
                                <h1 className="text-5xl font-bold text-blue-600 mb-4">Best Practices</h1>
                                <p className="text-xl text-gray-600">Design Principles & Code Organization</p>
                            </div>
                        )
                    },

                    // Component Design Principles
                    {
                        title: "Component Design Principles",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Component Design Principles</h2>
                                <div className="space-y-4">
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">1. Single Responsibility Principle</h3>
                                        <p className="text-sm text-gray-700 mb-2">Each component should have one clear purpose</p>
                                        <div className="grid grid-cols-2 gap-3 text-xs">
                                            <div className="bg-red-50 p-2 rounded">
                                                <p className="font-semibold text-red-700">‚ùå Bad:</p>
                                                <p>UserProfileDashboardWithEditingAndSettings</p>
                                            </div>
                                            <div className="bg-green-50 p-2 rounded">
                                                <p className="font-semibold text-green-700">‚úì Good:</p>
                                                <p>UserProfile, ProfileEditor, UserSettings</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">2. Component Composition Over Inheritance</h3>
                                        <p className="text-sm text-gray-700">Build complex UIs by combining simple components</p>
                                        <div className="bg-white p-2 rounded mt-2 text-xs font-mono">
                                            &lt;Card&gt; ‚Üí &lt;CardHeader&gt; + &lt;CardBody&gt; + &lt;CardFooter&gt;
                                        </div>
                                    </div>
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">3. Parameter Design</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Use strongly typed parameters</li>
                                            <li>Provide sensible defaults</li>
                                            <li>Validate parameters in OnParametersSet</li>
                                            <li>Keep parameter count manageable ({"<"}10)</li>
                                            <li>Use parameter objects for complex data</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">4. When to Split Components</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Component {">"} 200-300 lines</li>
                                            <li>Multiple distinct responsibilities</li>
                                            <li>Reusable section of UI</li>
                                            <li>Performance optimization needed</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Code Organization
                    {
                        title: "Code Organization",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Code Organization Best Practices</h2>
                                <div className="space-y-4">
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-3">Project Structure</h3>
                                        <div className="grid grid-cols-2 gap-3 text-sm">
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold text-blue-700 mb-2">Feature-Based (Recommended)</p>
                                                <pre className="text-xs font-mono">{`
        /Features
            /Products
                ProductList.razor
                ProductCard.razor
                ProductService.cs
            /Orders
                OrderList.razor
                OrderService.cs`
                                                }</pre>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold text-gray-700 mb-2">Technical-Based</p>
                                                <pre className="text-xs font-mono">{
                                                    `/Pages
            ProductList.razor
            /Components
            ProductCard.razor
            /Services
            ProductService.cs`
                                                }</pre>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Component Organization</h3>
                                        <ul className="text-sm space-y-2">
                                            <li><span className="font-semibold">/Pages:</span> Routable page components</li>
                                            <li><span className="font-semibold">/Components:</span> Shared, reusable components</li>
                                            <li><span className="font-semibold">/Layouts:</span> Layout components</li>
                                            <li><span className="font-semibold">/Shared:</span> App-wide utilities</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold mb-2">Naming Conventions</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Components: PascalCase (UserCard.razor)</li>
                                            <li>Parameters: PascalCase</li>
                                            <li>Private fields: camelCase or _camelCase</li>
                                            <li>Event callbacks: On[EventName]</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Monitoring Section
                    {
                        title: "Performance Monitoring",
                        content: (
                            <div className="flex flex-col items-center justify-center h-full">
                                <Gauge size={80} className="text-orange-500 mb-6" />
                                <h1 className="text-5xl font-bold text-blue-600 mb-4">Performance Monitoring</h1>
                                <p className="text-xl text-gray-600">Profiling & Debugging</p>
                            </div>
                        )
                    },

                    // Profiling Tools
                    {
                        title: "Profiling Tools",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Browser DevTools for Performance</h2>
                                <div className="space-y-4">
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Chrome DevTools Performance Tab</h3>
                                        <ul className="text-sm space-y-2">
                                            <li><span className="font-semibold">Record:</span> Capture performance profile</li>
                                            <li><span className="font-semibold">Analyze:</span> Identify long-running tasks</li>
                                            <li><span className="font-semibold">Metrics:</span> FCP, LCP, CLS, TTI</li>
                                        </ul>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Memory Profiler</h3>
                                        <div className="space-y-2 text-sm">
                                            <p><span className="font-semibold">Heap Snapshot:</span> Capture memory at point in time</p>
                                            <p><span className="font-semibold">Allocation Timeline:</span> Track memory over time</p>
                                            <p><span className="font-semibold">Compare Snapshots:</span> Find memory leaks</p>
                                        </div>
                                    </div>
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Network Tab</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Monitor bundle sizes</li>
                                            <li>Check lazy-loaded assembly downloads</li>
                                            <li>Analyze API call performance</li>
                                            <li>Verify caching headers</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },
                    // Blazor Debugging Techniques
                    {
                        title: "Blazor-Specific Debugging",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Blazor-Specific Debugging Techniques</h2>
                                <div className="space-y-4">
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Blazor Server Debugging</h3>
                                        <ul className="text-sm space-y-2">
                                            <li><span className="font-semibold">Visual Studio:</span> Full debugging support, breakpoints, watch windows</li>
                                            <li><span className="font-semibold">Circuit monitoring:</span> Track active SignalR circuits</li>
                                            <li><span className="font-semibold">Logging:</span> ILogger injection for detailed logs</li>
                                            <li><span className="font-semibold">Hot Reload:</span> Update code without restart</li>
                                        </ul>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Blazor WebAssembly Debugging</h3>
                                        <ul className="text-sm space-y-2">
                                            <li><span className="font-semibold">Browser debugging:</span> Chrome/Edge with Shift+Alt+D</li>
                                            <li><span className="font-semibold">Visual Studio:</span> Debug with browser opened</li>
                                            <li><span className="font-semibold">Source maps:</span> Enable for readable stack traces</li>
                                            <li><span className="font-semibold">Console logging:</span> Console.WriteLine appears in browser console</li>
                                        </ul>
                                    </div>
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Component Inspector</h3>
                                        <p className="text-sm text-gray-700 mb-2">Blazor's built-in component tree inspector</p>
                                        <ul className="text-xs space-y-1">
                                            <li>View component hierarchy</li>
                                            <li>Inspect parameters and state</li>
                                            <li>Track render counts</li>
                                            <li>Identify performance bottlenecks</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold mb-2">Logging Best Practices</h3>
                                        <div className="bg-white p-3 rounded font-mono text-xs">
                                            <pre>{`
        @inject ILogger<MyComponent> Logger

        Logger.LogInformation("Component initialized");
        Logger.LogWarning("Slow operation: {duration}ms", elapsed);
        Logger.LogError(ex, "Failed to load data");`
                                            }</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Debugging Tools Demo
                    {
                        title: "Debugging Tools in Action",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Using Debugging Tools</h2>
                                <div className="space-y-4">
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-3">Visual Studio Debugging</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">1. Set Breakpoints</p>
                                                <p className="text-xs text-gray-600">Click left margin in .razor or .cs files</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">2. Start Debugging (F5)</p>
                                                <p className="text-xs text-gray-600">Browser opens with debugger attached</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">3. Inspect Variables</p>
                                                <p className="text-xs text-gray-600">Hover over variables or use Watch window</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">4. Step Through Code</p>
                                                <p className="text-xs text-gray-600">F10 (Step Over), F11 (Step Into), Shift+F11 (Step Out)</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-3">Browser DevTools</h3>
                                        <div className="grid grid-cols-2 gap-3 text-sm">
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">Console Tab</p>
                                                <ul className="text-xs space-y-1">
                                                    <li>View Console.WriteLine output</li>
                                                    <li>Check for JavaScript errors</li>
                                                    <li>Execute JS commands</li>
                                                </ul>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">Network Tab</p>
                                                <ul className="text-xs space-y-1">
                                                    <li>Monitor SignalR connections</li>
                                                    <li>Check API response times</li>
                                                    <li>Verify DLL downloads</li>
                                                </ul>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">Sources Tab</p>
                                                <ul className="text-xs space-y-1">
                                                    <li>View loaded assemblies</li>
                                                    <li>Set JavaScript breakpoints</li>
                                                    <li>Debug JSInterop calls</li>
                                                </ul>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">Performance Tab</p>
                                                <ul className="text-xs space-y-1">
                                                    <li>Record performance profile</li>
                                                    <li>Identify slow operations</li>
                                                    <li>Check frame rates</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Memory Profiling
                    {
                        title: "Memory Profiling",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Memory Profiling & Leak Detection</h2>
                                <div className="space-y-4">
                                    <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                        <h3 className="font-semibold text-lg text-red-700 mb-2">Detecting Memory Leaks - Step by Step</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">Step 1: Take Initial Snapshot</p>
                                                <p className="text-xs text-gray-600">Open DevTools ‚Üí Memory ‚Üí Take heap snapshot</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">Step 2: Interact with App</p>
                                                <p className="text-xs text-gray-600">Navigate, open/close components, perform actions</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">Step 3: Force Garbage Collection</p>
                                                <p className="text-xs text-gray-600">Click trash icon üóëÔ∏è in DevTools Memory tab</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">Step 4: Take Second Snapshot</p>
                                                <p className="text-xs text-gray-600">Compare with first snapshot</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">Step 5: Analyze Differences</p>
                                                <p className="text-xs text-gray-600">Look for retained objects that should have been released</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">What to Look For</h3>
                                        <ul className="text-sm space-y-1">
                                            <li><span className="font-semibold">Detached DOM trees:</span> Components not properly disposed</li>
                                            <li><span className="font-semibold">Event listeners:</span> Unsubscribed event handlers</li>
                                            <li><span className="font-semibold">Timers:</span> Undisposed Timer objects</li>
                                            <li><span className="font-semibold">Large arrays/collections:</span> Growing unbounded</li>
                                            <li><span className="font-semibold">Retained closures:</span> Anonymous functions keeping references</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Memory Profiling Tools
                    {
                        title: "Memory Profiling Tools",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Memory Profiling Tools Comparison</h2>
                                <div className="space-y-4">
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Chrome/Edge DevTools Memory Tab</h3>
                                        <div className="grid grid-cols-2 gap-3 text-sm">
                                            <div>
                                                <p className="font-semibold text-green-700 mb-2">Heap Snapshot</p>
                                                <ul className="text-xs space-y-1">
                                                    <li>Point-in-time memory capture</li>
                                                    <li>View all objects in memory</li>
                                                    <li>Compare multiple snapshots</li>
                                                    <li>Find retained paths</li>
                                                </ul>
                                            </div>
                                            <div>
                                                <p className="font-semibold text-green-700 mb-2">Allocation Timeline</p>
                                                <ul className="text-xs space-y-1">
                                                    <li>Record allocations over time</li>
                                                    <li>See when objects are created</li>
                                                    <li>Identify memory spikes</li>
                                                    <li>Track allocation patterns</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">Visual Studio Diagnostic Tools</h3>
                                        <ul className="text-sm space-y-2">
                                            <li><span className="font-semibold">Memory Usage:</span> Track .NET heap allocations</li>
                                            <li><span className="font-semibold">CPU Usage:</span> Identify hot paths</li>
                                            <li><span className="font-semibold">Events:</span> View component lifecycle events</li>
                                            <li><span className="font-semibold">Profiler:</span> Deep performance analysis</li>
                                        </ul>
                                    </div>
                                    <div className="bg-purple-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">dotMemory (JetBrains)</h3>
                                        <p className="text-sm text-gray-700 mb-2">Advanced .NET memory profiler</p>
                                        <ul className="text-xs space-y-1">
                                            <li>Automatic leak detection</li>
                                            <li>Detailed retention graphs</li>
                                            <li>Traffic analysis</li>
                                            <li>Compare snapshots easily</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Real-World Section
                    {
                        title: "Real-World Scenarios",
                        content: (
                            <div className="flex flex-col items-center justify-center h-full">
                                <TrendingUp size={80} className="text-blue-500 mb-6" />
                                <h1 className="text-5xl font-bold text-blue-600 mb-4">Real-World Scenarios</h1>
                                <p className="text-xl text-gray-600">Before/After & Common Pitfalls</p>
                            </div>
                        )
                    },

                    // Case Study 1: Data Grid
                    {
                        title: "Case Study: Slow Data Grid",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Case Study 1: Optimizing Data Grid</h2>
                                <div className="space-y-4">
                                    <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                        <h3 className="font-semibold text-lg text-red-700 mb-2">‚ùå Problem: Slow 10,000 Row Grid</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Initial load: 8 seconds</li>
                                            <li>Sorting/filtering: 3-4 seconds</li>
                                            <li>Browser becomes unresponsive</li>
                                            <li>High memory usage (500MB+)</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-yellow-700 mb-2">‚ö†Ô∏è Issues Found</h3>
                                        <ul className="text-sm space-y-2">
                                            <li>Rendering all 10,000 rows at once</li>
                                            <li>No @key directive on rows</li>
                                            <li>Complex cell components re-rendering unnecessarily</li>
                                            <li>No pagination or virtualization</li>
                                            <li>Inline calculations in every cell render</li>
                                        </ul>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                        <h3 className="font-semibold text-lg text-green-700 mb-2">‚úì Solutions Applied</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">1. Virtualization</p>
                                                <p className="text-xs">Used Virtualize component - only render visible rows (~20)</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">2. Added @key directive</p>
                                                <p className="text-xs">Each row tracked by unique ID for efficient updates</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">3. Optimized cell components</p>
                                                <p className="text-xs">Implemented ShouldRender() to prevent unnecessary updates</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold mb-1">4. Lazy loading data</p>
                                                <p className="text-xs">Fetch data on-demand as user scrolls</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-blue-700 mb-2">üìä Results</h3>
                                        <div className="grid grid-cols-3 gap-4 text-sm">
                                            <div className="bg-red-100 p-3 rounded text-center">
                                                <p className="text-2xl font-bold text-red-700">8.0s</p>
                                                <p className="text-xs">Before Load</p>
                                            </div>
                                            <div className="bg-green-100 p-3 rounded text-center">
                                                <p className="text-2xl font-bold text-green-700">0.3s</p>
                                                <p className="text-xs">After Load</p>
                                            </div>
                                            <div className="bg-blue-100 p-3 rounded text-center">
                                                <p className="text-2xl font-bold text-blue-700">96%</p>
                                                <p className="text-xs">Faster</p>
                                            </div>
                                        </div>
                                        <p className="text-center mt-3 font-semibold text-blue-700">Memory: 500MB ‚Üí 50MB (90% reduction)</p>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Case Study 1 Code
                    {
                        title: "Data Grid - Code Comparison",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Data Grid Optimization Code</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BEFORE: Rendering all 10,000 rows</div>
                                        <pre>{`
        @foreach (var item in allItems)
        {
            <div class="row">
                <div class="cell">@item.Name</div>
                <div class="cell">@CalculateTotal(item)</div>
                <div class="cell">@FormatDate(item.Date)</div>
            </div>
        }

        @code {
            private List<DataItem> allItems = new(); // 10,000 items

            // Called on EVERY render for EVERY cell
            private decimal CalculateTotal(DataItem item)
                => item.Price * item.Quantity * 1.18m;
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì AFTER: Virtualized with optimizations</div>
                                        <pre>{`
        <Virtualize ItemsProvider="LoadItemsAsync" Context="item">
            <div @key="item.Id" class="row">
                <OptimizedCell @key="item.Id" Data="@item" />
            </div>
        </Virtualize>

        @code {
            private async ValueTask<ItemsProviderResult<DataItem>>
                LoadItemsAsync(ItemsProviderRequest request)
            {
                // Only load what's needed
                var items = await DataService.GetItemsAsync(
                    request.StartIndex,
                    request.Count);

                return new ItemsProviderResult<DataItem>(
                    items, totalItemCount: 10000);
            }
        }

        // OptimizedCell.razor
        @code {
            [Parameter] public DataItem Data { get; set; }
            private DataItem previousData;

            // Pre-calculate expensive operations
            private decimal cachedTotal;

            protected override void OnParametersSet()
            {
                cachedTotal = Data.Price * Data.Quantity * 1.18m;
            }

            protected override bool ShouldRender()
            {
                // Only render if data actually changed
                if (previousData?.Id != Data?.Id ||
                    previousData?.Value != Data?.Value)
                {
                    previousData = Data;
                    return true;
                }
                return false;
            }
        }`
                                        }</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Case Study 2: Memory Leak
                    {
                        title: "Case Study: Memory Leak",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Case Study 2: Real-Time Dashboard Memory Leak</h2>
                                <div className="space-y-4">
                                    <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                        <h3 className="font-semibold text-lg text-red-700 mb-2">‚ùå Problem: Growing Memory Usage</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Dashboard displays real-time stock prices</li>
                                            <li>Memory usage increases 10MB/minute</li>
                                            <li>After 30 minutes: 300MB+ memory</li>
                                            <li>Browser slows down, tabs crash</li>
                                            <li>Users complain about performance degradation</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-yellow-700 mb-2">üîç Root Cause Analysis</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold text-red-700 mb-1">Issue 1: Timer not disposed</p>
                                                <p className="text-xs">System.Timers.Timer running every second, never stopped</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold text-red-700 mb-1">Issue 2: Event subscription leak</p>
                                                <p className="text-xs">Subscribed to SignalR hub events, never unsubscribed</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold text-red-700 mb-1">Issue 3: Accumulating data</p>
                                                <p className="text-xs">Price history list growing unbounded (60+ entries/minute)</p>
                                            </div>
                                            <div className="bg-white p-3 rounded">
                                                <p className="font-semibold text-red-700 mb-1">Issue 4: No disposal implementation</p>
                                                <p className="text-xs">Component missing IDisposable/IAsyncDisposable</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                        <h3 className="font-semibold text-lg text-green-700 mb-2">‚úì Solution Implemented</h3>
                                        <ul className="text-sm space-y-2">
                                            <li>‚úì Implemented IAsyncDisposable interface</li>
                                            <li>‚úì Proper timer disposal with PeriodicTimer</li>
                                            <li>‚úì Unsubscribe from SignalR hub events</li>
                                            <li>‚úì Limited price history to last 100 entries</li>
                                            <li>‚úì Added CancellationToken for async operations</li>
                                            <li>‚úì Used weak event pattern for long-lived subscriptions</li>
                                        </ul>
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg mb-2">üìä Results</h3>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-red-100 p-3 rounded text-center">
                                                <p className="text-3xl font-bold text-red-700">300MB</p>
                                                <p className="text-xs">After 30 min (Before)</p>
                                            </div>
                                            <div className="bg-green-100 p-3 rounded text-center">
                                                <p className="text-3xl font-bold text-green-700">50MB</p>
                                                <p className="text-xs">Stable (After)</p>
                                            </div>
                                        </div>
                                        <p className="text-center mt-3 font-semibold text-green-700">Memory leak eliminated - 83% reduction!</p>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Case Study 2 Code
                    {
                        title: "Memory Leak Fix - Code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Real-Time Dashboard Fix</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BEFORE: Multiple memory leaks</div>
                                        <pre>{`
        @code {
            [Inject] private IHubConnection HubConnection { get; set; }
            private Timer updateTimer;
            private List<PricePoint> priceHistory = new();

            protected override async Task OnInitializedAsync()
            {
                // LEAK 1: Timer never disposed
                updateTimer = new Timer(async _ =>
                {
                    await LoadPricesAsync();
                    StateHasChanged(); // Wrong thread!
                }, null, 0, 1000);

                // LEAK 2: Event never unsubscribed
                HubConnection.On<decimal>("PriceUpdate", price =>
                {
                    // LEAK 3: List grows unbounded
                    priceHistory.Add(new PricePoint(price));
                    StateHasChanged();
                });

                await HubConnection.StartAsync();
            }
            // LEAK 4: No Dispose method at all!
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì AFTER: All leaks fixed</div>
                                        <pre>{`

        @implements IAsyncDisposable

        @code {
            [Inject] private IHubConnection HubConnection { get; set; }
            private PeriodicTimer updateTimer;
            private CancellationTokenSource cts = new();
            private List<PricePoint> priceHistory = new();
            private const int MaxHistorySize = 100;

            protected override async Task OnInitializedAsync()
            {
                // FIX 1: Use PeriodicTimer with cancellation
                updateTimer = new PeriodicTimer(TimeSpan.FromSeconds(1));
                _ = RunUpdateLoopAsync();

                // FIX 2: Track subscription for cleanup
                HubConnection.On<decimal>("PriceUpdate", OnPriceUpdate);
                await HubConnection.StartAsync();
            }

            private async Task RunUpdateLoopAsync()
            {
                try
                {
                    while (await updateTimer.WaitForNextTickAsync(cts.Token))
                    {
                        // FIX: Proper thread marshalling
                        await InvokeAsync(async () =>
                        {
                            await LoadPricesAsync();
                            StateHasChanged();
                        });
                    }
                }
                catch (OperationCanceledException)
                {
                    // Expected on disposal
                }
            }

            private void OnPriceUpdate(decimal price)
            {
                priceHistory.Add(new PricePoint(price));

                // FIX 3: Limit history size
                if (priceHistory.Count > MaxHistorySize)
                {
                    priceHistory.RemoveRange(0,
                        priceHistory.Count - MaxHistorySize);
                }

                InvokeAsync(StateHasChanged);
            }

            // FIX 4: Proper disposal
            public async ValueTask DisposeAsync()
            {
                // Cancel timer
                cts?.Cancel();
                cts?.Dispose();
                updateTimer?.Dispose();

                // Unsubscribe from hub
                HubConnection?.Remove("PriceUpdate");

                // Stop connection if we own it
                if (HubConnection?.State == HubConnectionState.Connected)
                {
                    await HubConnection.StopAsync();
                }
            }
        }`
                                        }</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },
                    // Pitfall 1: StateHasChanged
                    {
                        title: "Pitfall 1: StateHasChanged Abuse",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Pitfall #1: Excessive StateHasChanged Calls</h2>
                                <div className="space-y-4">
                                    <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                        <h3 className="font-semibold text-lg text-red-700 mb-2">‚ùå The Problem</h3>
                                        <p className="text-sm mb-2">Calling StateHasChanged() too frequently causes unnecessary re-renders and performance degradation</p>
                                        <ul className="text-sm space-y-1">
                                            <li>Render storms (100+ renders per second)</li>
                                            <li>UI becomes unresponsive</li>
                                            <li>CPU usage spikes</li>
                                            <li>Poor user experience</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-yellow-700 mb-2">‚ö†Ô∏è Common Scenarios</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Calling in tight loops</li>
                                            <li>Timer callbacks without throttling</li>
                                            <li>After every property change</li>
                                            <li>In event handlers when EventCallback would work</li>
                                        </ul>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                        <h3 className="font-semibold text-lg text-green-700 mb-2">‚úì Solutions</h3>
                                        <ul className="text-sm space-y-2">
                                            <li>Use EventCallback instead (auto-triggers render)</li>
                                            <li>Batch multiple updates before calling StateHasChanged</li>
                                            <li>Implement rate limiting/throttling</li>
                                            <li>Let framework handle rendering when possible</li>
                                            <li>Use ShouldRender() to prevent unnecessary renders</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Pitfall 1 Code
                    {
                        title: "StateHasChanged - Code Examples",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">StateHasChanged Anti-Patterns</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BAD: Calling in loop - causes render storm</div>
                                        <pre>{`
        private async Task UpdateProgressAsync()
        {
            for (int i = 0; i <= 100; i++)
            {
                progress = i;
                StateHasChanged(); // 100 renders!
                await Task.Delay(10);
            }
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Throttle updates</div>
                                        <pre>{`
        private async Task UpdateProgressAsync()
        {
            for (int i = 0; i <= 100; i++)
            {
                progress = i;

                // Only update UI every 10%
                if (i % 10 == 0)
                {
                    StateHasChanged();
                }

                await Task.Delay(10);
            }
            StateHasChanged(); // Final update
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BAD: Manual StateHasChanged with events</div>
                                        <pre>{`
        <button @onclick="HandleClick">Click</button>

        private void HandleClick()
        {
            counter++;
            StateHasChanged(); // Unnecessary!
        }`
                                        }</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Let EventCallback handle it</div>
                                        <pre>{`
        <button @onclick="HandleClick">Click</button>

        private void HandleClick()
        {
            counter++; // Auto re-renders after event handler
        }`
                                        }</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Pitfall 2: Large Lists
                    {
                        title: "Pitfall 2: Large Lists Without Virtualization",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Pitfall #2: Rendering Large Lists</h2>
                                <div className="space-y-4">
                                    <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                        <h3 className="font-semibold text-lg text-red-700 mb-2">‚ùå The Problem</h3>
                                        <p className="text-sm mb-2">Rendering thousands of items creates massive DOM trees</p>
                                        <ul className="text-sm space-y-1">
                                            <li>Slow initial render (5-10+ seconds)</li>
                                            <li>High memory consumption</li>
                                            <li>Scrolling lag and jank</li>
                                            <li>Browser may freeze or crash</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-yellow-700 mb-2">‚ö†Ô∏è When It Happens</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>Data tables with 1000+ rows</li>
                                            <li>Product catalogs</li>
                                            <li>Log viewers</li>
                                            <li>Message/chat histories</li>
                                            <li>Any list with 500+ items</li>
                                        </ul>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                        <h3 className="font-semibold text-lg text-green-700 mb-2">‚úì Solutions</h3>
                                        <ul className="text-sm space-y-2">
                                            <li><span className="font-semibold">Virtualize component:</span> Only render visible items</li>
                                            <li><span className="font-semibold">Pagination:</span> Break into pages (50-100 items)</li>
                                            <li><span className="font-semibold">Infinite scroll:</span> Load more as user scrolls</li>
                                            <li><span className="font-semibold">Search/Filter:</span> Reduce displayed items</li>
                                            <li><span className="font-semibold">Lazy loading:</span> Load data on-demand</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },
                    // Pitfall 2 Code
                    {
                        title: "Large Lists - Code Examples",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Large Lists Solutions</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BAD: Rendering all items</div>
                                        <pre>{`@foreach (var item in allItems) // 10,000 items
        {
            <div class="item">
                <h3>@item.Name</h3>
                <p>@item.Description</p>
            </div>
        }

        @code {
            private List<Item> allItems = new();
            // Creates 10,000 DOM elements!
        }`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Virtualization</div>
                                        <pre>{`<Virtualize Items="@allItems" Context="item">
            <div class="item">
                <h3>@item.Name</h3>
                <p>@item.Description</p>
            </div>
        </Virtualize>

        @code {
            private List<Item> allItems = new();
            // Only renders ~20 visible items!
        }`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Pagination</div>
                                        <pre>{`@foreach (var item in currentPageItems)
        {
            <div class="item">
                <h3>@item.Name</h3>
                <p>@item.Description</p>
            </div>
        }

        <div class="pagination">
            <button @onclick="PreviousPage">Previous</button>
            <span>Page @currentPage of @totalPages</span>
            <button @onclick="NextPage">Next</button>
        </div>

        @code {
            private List<Item> currentPageItems = new();
            private int currentPage = 1;
            private int pageSize = 50;
            private int totalPages;

            private void NextPage()
            {
                if (currentPage < totalPages)
                {
                    currentPage++;
                    LoadPage();
                }
            }
        }`}</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Pitfall 3: Complex Calculations
                    {
                        title: "Pitfall 3: Expensive Calculations in Markup",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Pitfall #3: Complex Calculations in Razor Markup</h2>
                                <div className="space-y-4">
                                    <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                        <h3 className="font-semibold text-lg text-red-700 mb-2">‚ùå The Problem</h3>
                                        <p className="text-sm mb-2">Calculations in markup are executed on every render</p>
                                        <ul className="text-sm space-y-1">
                                            <li>‚Ä¢ Recalculated unnecessarily</li>
                                            <li>‚Ä¢ Slows down rendering</li>
                                            <li>‚Ä¢ Especially bad in loops</li>
                                            <li>‚Ä¢ Can't be optimized by compiler</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-yellow-700 mb-2">‚ö†Ô∏è Common Examples</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>‚Ä¢ Price calculations (tax, discounts)</li>
                                            <li>‚Ä¢ Date formatting operations</li>
                                            <li>‚Ä¢ String manipulations</li>
                                            <li>‚Ä¢ LINQ queries in markup</li>
                                            <li>‚Ä¢ Complex conditional logic</li>
                                        </ul>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                        <h3 className="font-semibold text-lg text-green-700 mb-2">‚úì Solutions</h3>
                                        <ul className="text-sm space-y-2">
                                            <li>‚Ä¢ Calculate once in @code block</li>
                                            <li>‚Ä¢ Cache computed values</li>
                                            <li>‚Ä¢ Use properties for complex logic</li>
                                            <li>‚Ä¢ Move LINQ to OnParametersSet</li>
                                            <li>‚Ä¢ Pre-process data before rendering</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Pitfall 3 Code
                    {
                        title: "Complex Calculations - Code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Expensive Calculations Fix</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BAD: Calculations in markup</div>
                                        <pre>{`@foreach (var product in products)
        {
            <div class="product">
                <h3>@product.Name</h3>
                <p>Price: @(product.Price * 1.18m).ToString("C")</p>
                <p>Discount: @(product.Price * 0.15m).ToString("C")</p>
                <p>Final: @((product.Price * 1.18m) - (product.Price * 0.15m)).ToString("C")</p>
            </div>
        }

        // These calculations run on EVERY render
        // For 1000 products = 3000+ calculations per render!`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Pre-calculate and cache</div>
                                        <pre>{`@foreach (var product in displayProducts)
        {
            <div class="product">
                <h3>@product.Name</h3>
                <p>Price: @product.PriceWithTax</p>
                <p>Discount: @product.DiscountAmount</p>
                <p>Final: @product.FinalPrice</p>
            </div>
        }

        @code {
            private List<ProductViewModel> displayProducts = new();

            protected override void OnParametersSet()
            {
                // Calculate once when data changes
                displayProducts = products.Select(p => new ProductViewModel
                {
                    Name = p.Name,
                    PriceWithTax = (p.Price * 1.18m).ToString("C"),
                    DiscountAmount = (p.Price * 0.15m).ToString("C"),
                    FinalPrice = ((p.Price * 1.18m) - (p.Price * 0.15m)).ToString("C")
                }).ToList();
            }

            public class ProductViewModel
            {
                public string Name { get; set; }
                public string PriceWithTax { get; set; }
                public string DiscountAmount { get; set; }
                public string FinalPrice { get; set; }
            }
        }`}</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Pitfall 4: Missing @key
                    {
                        title: "Pitfall 4: Missing @key Directive",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Pitfall #4: Not Using @key for Dynamic Lists</h2>
                                <div className="space-y-4">
                                    <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                        <h3 className="font-semibold text-lg text-red-700 mb-2">‚ùå The Problem</h3>
                                        <p className="text-sm mb-2">Without @key, Blazor reuses components by position, not identity</p>
                                        <ul className="text-sm space-y-1">
                                            <li>‚Ä¢ Wrong data displayed after reordering</li>
                                            <li>‚Ä¢ Full re-render when items move</li>
                                            <li>‚Ä¢ Component state loss</li>
                                            <li>‚Ä¢ Animations don't work correctly</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-yellow-700 mb-2">‚ö†Ô∏è When It Matters Most</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>‚Ä¢ Sortable lists</li>
                                            <li>‚Ä¢ Drag-and-drop interfaces</li>
                                            <li>‚Ä¢ Real-time updates (chat, notifications)</li>
                                            <li>‚Ä¢ Filtered/searched lists</li>
                                            <li>‚Ä¢ Components with internal state</li>
                                        </ul>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                        <h3 className="font-semibold text-lg text-green-700 mb-2">‚úì Solutions</h3>
                                        <ul className="text-sm space-y-2">
                                            <li>‚Ä¢ Always use @key with unique identifier</li>
                                            <li>‚Ä¢ Use stable IDs (database IDs, GUIDs)</li>
                                            <li>‚Ä¢ Never use index as key</li>
                                            <li>‚Ä¢ Apply @key to both parent and child elements</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Pitfall 4 Code
                    {
                        title: "Missing @key - Code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">@key Directive Examples</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BAD: No @key - causes issues</div>
                                        <pre>{`@foreach (var task in tasks)
        {
            <TaskItem Task="@task" />
        }

        // If tasks reorder:
        // - Components reused by position
        // - Wrong data displayed
        // - Full re-render needed`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: With @key</div>
                                        <pre>{`@foreach (var task in tasks)
        {
            <TaskItem @key="task.Id" Task="@task" />
        }

        // Each component tracked by task.Id
        // Reordering preserves component identity
        // Only changed items re-render`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BAD: Using index as key</div>
                                        <pre>{`@foreach (var (task, index) in tasks.Select((t, i) => (t, i)))
        {
            <TaskItem @key="index" Task="@task" />
        }

        // Index changes when items reorder
        // Defeats purpose of @key!`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Nested @key</div>
                                        <pre>{`@foreach (var category in categories)
        {
            <div @key="category.Id" class="category">
                <h3>@category.Name</h3>
                @foreach (var item in category.Items)
                {
                    <ItemCard @key="item.Id" Item="@item" />
                }
            </div>
        }

        // Both parent and child tracked correctly`}</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Pitfall 5: Inline Lambdas
                    {
                        title: "Pitfall 5: Inline Lambda Parameters",
                        content: (
                            <div>
                                <h2 className="text-3xl font-bold text-blue-600 mb-6">Pitfall #5: Inline Lambda Expressions as Parameters</h2>
                                <div className="space-y-4">
                                    <div className="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                        <h3 className="font-semibold text-lg text-red-700 mb-2">‚ùå The Problem</h3>
                                        <p className="text-sm mb-2">Creates new delegate instance on every render</p>
                                        <ul className="text-sm space-y-1">
                                            <li>‚Ä¢ Child component sees "new" parameter every time</li>
                                            <li>‚Ä¢ Triggers unnecessary re-renders</li>
                                            <li>‚Ä¢ Defeats ShouldRender optimization</li>
                                            <li>‚Ä¢ Memory pressure from allocations</li>
                                        </ul>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <h3 className="font-semibold text-lg text-yellow-700 mb-2">‚ö†Ô∏è Common Scenarios</h3>
                                        <ul className="text-sm space-y-1">
                                            <li>‚Ä¢ Event callbacks in loops</li>
                                            <li>‚Ä¢ OnClick handlers with parameters</li>
                                            <li>‚Ä¢ Inline filter/map functions</li>
                                            <li>‚Ä¢ Component parameters with closures</li>
                                        </ul>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                        <h3 className="font-semibold text-lg text-green-700 mb-2">‚úì Solutions</h3>
                                        <ul className="text-sm space-y-2">
                                            <li>‚Ä¢ Define methods instead of inline lambdas</li>
                                            <li>‚Ä¢ Cache delegates when needed</li>
                                            <li>‚Ä¢ Use EventCallback.Factory.Create for stability</li>
                                            <li>‚Ä¢ Pass data through parameters, not closures</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )
                    },

                    // Pitfall 5 Code
                    {
                        title: "Inline Lambdas - Code",
                        content: (
                            <div>
                                <h2 className="text-2xl font-bold text-blue-600 mb-4">Lambda Parameter Issues</h2>
                                <div className="space-y-3">
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BAD: Inline lambda in loop</div>
                                        <pre>{`@foreach (var item in items)
        {
            <button @onclick="() => DeleteItem(item.Id)">
                Delete
            </button>
        }

        // Creates new lambda on EVERY render
        // Even if items haven't changed!`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Use method reference</div>
                                        <pre>{`@foreach (var item in items)
        {
            <ItemCard Item="@item"
                      OnDelete="DeleteItem" />
        }

        @code {
            private async Task DeleteItem(int id)
            {
                await ItemService.DeleteAsync(id);
                items.RemoveAll(i => i.Id == id);
            }
        }

        // ItemCard.razor
        <button @onclick="() => OnDelete.InvokeAsync(Item.Id)">
            Delete
        </button>

        @code {
            [Parameter] public Item Item { get; set; }
            [Parameter] public EventCallback<int> OnDelete { get; set; }
        }`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-red-400 mb-1">// ‚ùå BAD: Inline filter with closure</div>
                                        <pre>{`<ChildComponent
            Items="@items.Where(i => i.CategoryId == selectedCategory).ToList()" />

        // New list created every render!`}</pre>
                                    </div>
                                    <div className="bg-gray-900 text-gray-100 p-3 rounded-lg font-mono text-xs overflow-auto">
                                        <div className="text-green-400 mb-1">// ‚úì GOOD: Cache filtered results</div>
                                        <pre>{`<ChildComponent Items="@filteredItems" />

        @code {
            private List<Item> filteredItems = new();
            private int previousCategory;

            protected override void OnParametersSet()
            {
                if (previousCategory != selectedCategory)
                {
                    filteredItems = items
                        .Where(i => i.CategoryId == selectedCategory)
                        .ToList();
                    previousCategory = selectedCategory;
                }
            }
        }`}</pre>
                                    </div>
                                </div>
                            </div>
                        )
                    },
                ];

                let current = 0;

                function renderSlide() {
                    const slide = slides[current];
                    const slideContent = (
                        <div className="slide-inner">
                            {slide.content}
                        </div>
                    );
                    ReactDOM.render(slideContent, document.getElementById("slide"));
                    document.getElementById("counter").textContent = `${current + 1} / ${slides.length}`;
                    // Wrap <pre> content in <code class="language-cs"> so Prism can highlight it
                    wrapPreblocksForPrism();

                    // Trigger fade-in animation on the inner wrapper. We remove/add the
                    // visible class to replay the transition on each render.
                    try {
                        const inner = document.querySelector('#slide .slide-inner');
                        if (inner) {
                            inner.classList.remove('visible');
                            // Force reflow so the transition will run when we add the class
                            // back (see https://stackoverflow.com/questions/24148403)
                            void inner.offsetWidth;
                            requestAnimationFrame(() => inner.classList.add('visible'));
                        }
                    } catch (e) {/* ignore animation errors */ }
                }

                function wrapPreblocksForPrism() {
                    try {
                        const container = document.getElementById('slide');
                        if (!container) return;
                        const pres = container.querySelectorAll('pre');
                        pres.forEach(pre => {
                            // If pre already contains a code element, skip
                            if (pre.querySelector('code')) return;
                            const code = document.createElement('code');
                            // Use C#/Razor highlighting
                            code.className = 'language-cs';
                            // Preserve whitespace and text exactly
                            code.textContent = pre.textContent || '';
                            // Clear pre and insert code
                            pre.textContent = '';
                            pre.appendChild(code);
                            // Add line numbers styling (optional)
                            pre.classList.add('line-numbers');
                        });

                        // Trigger Prism if available
                        if (window.Prism && typeof Prism.highlightAll === 'function') {
                            Prism.highlightAll();
                        }
                    } catch (e) {
                        // fail silently - formatting is progressive enhancement
                        console.warn('Prism formatting failed', e);
                    }
                }

                document.getElementById("next").onclick = () => {
                    current = (current + 1) % slides.length;
                    renderSlide();
                };

                document.getElementById("prev").onclick = () => {
                    current = (current - 1 + slides.length) % slides.length;
                    renderSlide();
                };

                // Keyboard navigation: ArrowRight / ArrowLeft and PageDown / PageUp
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowRight' || e.key === 'PageDown') {
                        e.preventDefault();
                        current = (current + 1) % slides.length;
                        renderSlide();
                    } else if (e.key === 'ArrowLeft' || e.key === 'PageUp') {
                        e.preventDefault();
                        current = (current - 1 + slides.length) % slides.length;
                        renderSlide();
                    }
                });

                renderSlide();
    </script>
</body>

</html>